{% extends "base.html" %}
{% block title %}Safety Heatmap{% endblock %}

{% block head %}
<!-- Leaflet.heat plugin -->
<script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
{% endblock %}

{% block content %}
<div class="heatmap-page">

  <!-- Controls -->
  <div class="heatmap-controls">
    <h2 class="controls-title">Safety Heatmap</h2>
    <p class="controls-sub">Edinburgh safety scores across neighbourhoods.</p>

    <div class="form-group">
      <label class="form-label">Data layer</label>
      <div class="toggle-group">
        <button class="toggle-btn active" data-mode="composite">Overall</button>
        <button class="toggle-btn" data-mode="user">User Ratings</button>
        <button class="toggle-btn" data-mode="crime">Crime Data</button>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Heatmap intensity</label>
      <input type="range" id="intensitySlider" min="0.2" max="2.0" step="0.1"
             value="1.0" class="slider" />
    </div>

    <div class="legend">
      <div class="legend-title">Safety level</div>
      <div class="legend-gradient">
        <div class="gradient-bar"></div>
        <div class="gradient-labels">
          <span>Unsafe</span>
          <span>Safe</span>
        </div>
      </div>
    </div>

    <div id="areaList" class="area-list"></div>
  </div>

  <!-- Map -->
  <div id="heatmapMap" class="fullscreen-map"></div>

</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/heatmap.js') }}"></script>
{% endblock %}
